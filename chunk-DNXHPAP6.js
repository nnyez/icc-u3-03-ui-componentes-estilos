import{a as q}from"./chunk-45X2IWRU.js";import{r as k}from"./chunk-7T4TD45U.js";import{a as D,b as p,c as M,d as G,e as I,f as A,g as V,h as j,i as U}from"./chunk-TNZN56QU.js";import{g as N,h as R,k as T,n as P}from"./chunk-QOGA6DDO.js";import{j as L}from"./chunk-YWZJFH4M.js";import{Ab as a,Bb as y,Cb as b,Fa as l,Ob as E,Ua as C,_ as g,db as m,eb as d,fa as w,ga as S,ib as v,jb as t,kb as r,lb as u,na as _,q as x,rb as F,tb as f,yb as h}from"./chunk-AKAGUU27.js";function z(n,o){if(n&1&&(t(0,"div",9),w(),t(1,"svg",23),u(2,"path",24),r(),S(),t(3,"span"),a(4),r()()),n&2){let i=f();l(4),y(i.errorMessage())}}function H(n,o){if(n&1&&(t(0,"span",15),a(1),r()),n&2){let i=f();l(),b(" ",i.formUtils.getFieldError(i.loginForm,"email")," ")}}function O(n,o){if(n&1&&(t(0,"span",15),a(1),r()),n&2){let i=f();l(),b(" ",i.formUtils.getFieldError(i.loginForm,"password")," ")}}function J(n,o){n&1&&(u(0,"span",25),a(1," Iniciando sesion... "))}function K(n,o){n&1&&a(0," Iniciar Sesion ")}var B=class n{fb=g(j);authService=g(k);router=g(N);loginForm;loginTrigger=_(null);loginResource=P({params:()=>this.loginTrigger(),stream:({params:o})=>o?this.authService.login(o.email,o.password):x(null)});loading=this.loginResource.isLoading;formUtils=q;constructor(){this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]}),E(()=>{this.loginResource.hasValue()&&this.loginResource.value()&&this.router.navigate(["/home"])})}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{email:o,password:i}=this.loginForm.value;this.loginTrigger.set({email:o,password:i})}errorMessage=()=>{let o=this.loginResource.error();if(!o)return"";let i=o.code||"";return{"auth/invalid-email":"Correo no valido","auth/user-disabled":"El usuario esta deshabilitado","auth/user-not-found":"No existe un usuario con este correo","auth/wrong-password":"Contrasena incorrecta","auth/invalid-credential":"Credenciales invalidas"}[i]??"No pudimos iniciar sesion"};get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=C({type:n,selectors:[["app-login-page"]],decls:37,vars:10,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-linear-to-br","from-primary","to-secondary","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl","animate-fade-in"],[1,"card-body"],[1,"text-center","mb-6"],[1,"avatar","placeholder","mb-4"],[1,"bg-primary","text-primary-content","rounded-full","w-20"],[1,"text-4xl"],[1,"text-3xl","font-bold","text-primary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control","mb-6"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"block","text-red-500","text-sm","mt-1"],["type","password","formControlName","password","placeholder","********",1,"input","input-bordered","w-full","placeholder:opacity-25"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"divider"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/register",1,"link","link-primary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(i,e){if(i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),a(7,"\u{1F525}"),r()()(),t(8,"h1",7),a(9,"\xA1Bienvenido!"),r(),t(10,"p",8),a(11,"Inicia sesi\xF3n para continuar"),r()(),m(12,z,5,1,"div",9),t(13,"form",10),F("ngSubmit",function(){return e.onSubmit()}),t(14,"div",11)(15,"label",12)(16,"span",13),a(17,"Correo electronico"),r()(),u(18,"input",14),m(19,H,2,1,"span",15),r(),t(20,"div",11)(21,"label",12)(22,"span",13),a(23,"Contrasena"),r()(),u(24,"input",16),m(25,O,2,1,"span",15),r(),t(26,"div",17)(27,"button",18),m(28,J,2,0)(29,K,1,0),r()()(),t(30,"div",19),a(31,"O"),r(),t(32,"div",20)(33,"p",21),a(34," No tienes cuenta? "),t(35,"a",22),a(36," Registrate aqui "),r()()()()()()),i&2){let s,c;l(12),d(e.loginResource.error()?12:-1),l(),v("formGroup",e.loginForm),l(5),h("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),l(),d((s=e.loginForm.get("email"))!=null&&s.invalid&&((s=e.loginForm.get("email"))!=null&&s.touched)?19:-1),l(5),h("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),d((c=e.loginForm.get("password"))!=null&&c.invalid&&((c=e.loginForm.get("password"))!=null&&c.touched)?25:-1),l(2),v("disabled",e.loading()||e.loginForm.invalid),l(),d(e.loading()?28:29)}},dependencies:[L,U,I,D,M,G,A,V,T,R],encapsulation:2})};export{B as LoginPage};
