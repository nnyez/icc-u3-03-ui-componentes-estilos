<header>
  <div class="drawer">
    <input id="my-drawer-2" #drawerToggle type="checkbox" class="drawer-toggle" />
    <div class="drawer-content flex flex-col">
      <div class="navbar bg-base-300 w-full">
        <div class="flex-none lg:hidden">
          <label for="my-drawer-2" aria-label="open sidebar" class="btn btn-square btn-ghost">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              class="inline-block h-6 w-6 stroke-current"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </label>
        </div>
        <div class="sm:flex hidden">
          <div class="mx-2 flex-1">
            <div class="flex justify-start">
              @if (!isAuthenticated()) {
              <button (click)="navigateToLogin()" class="btn btn-primary">Iniciar Sesi贸n</button>
              } @if (isAuthenticated() && currentUser()) {
              <div class="dropdown dropdown-start">
                <label tabindex="0" class="btn btn-ghost btn-circle avatar">
                  <div
                    class="w-10 rounded-full bg-primary text-primary-content flex items-center justify-center"
                  >
                    <span>{{ currentUser()?.email?.charAt(0)?.toUpperCase() }}</span>
                  </div>
                </label>
                <ul
                  tabindex="0"
                  class="mt-3 z-1 p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-auto"
                >
                  <li class="menu-title text-gray-100">
                    <span>{{ currentUser()?.email }}</span>
                  </li>
                  <li>
                    <button
                      (click)="logout()"
                      class="text-error hover:bg-error hover:text-error-content"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                        />
                      </svg>
                      Cerrar Sesi贸n
                    </button>
                  </li>
                </ul>
              </div>
              }
            </div>
          </div>
          <div class="lg:block">
            <ul class="menu menu-horizontal">
              @if (authService.hasRole('admin')) {
              <li>
                <a routerLink="/admin">  Panel Admin </a>
              </li>
              }
              <li>
                <a
                  routerLink="/estilos-page"
                  (click)="closeDrawer()"
                  routerLinkActive="bg-primary text-primary-content"
                  >Estilos</a
                >
              </li>
              <li>
                <a
                  routerLink="/simpson-page"
                  (click)="closeDrawer()"
                  routerLinkActive="bg-primary text-primary-content"
                  >Simpsons</a
                >
              </li>
              <li>
                <a
                  routerLink="/home"
                  (click)="closeDrawer()"
                  routerLinkActive="bg-primary text-primary-content"
                  [routerLinkActiveOptions]="{ exact: true }"
                  >Home</a
                >
              </li>
            </ul>
            <!-- Bot贸n de cambio de tema -->
            <app-theme-switcher></app-theme-switcher>
          </div>
        </div>
      </div>
    </div>

    <div class="drawer-side flex flex-col justify-between">
      <label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"></label>

      <ul class="menu bg-base-200 min-h-full w-80 p-4">
        @if (authService.hasRole('admin')) {
        <li>
          <a routerLink="/admin">  Panel Admin </a>
        </li>
        }
        <li>
          <a
            routerLink="/estilos-page"
            routerLinkActive="bg-primary text-primary-content"
            (click)="closeDrawer()"
            >Estilos</a
          >
        </li>
        <li>
          <a
            routerLink="/simpson-page"
            routerLinkActive="bg-primary text-primary-content"
            (click)="closeDrawer()"
            >Simpsons</a
          >
        </li>
        <li>
          <a
            routerLink="/"
            routerLinkActive="bg-primary text-primary-content"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeDrawer()"
            >Home</a
          >
        </li>
      </ul>

      <div class="p-4 border-t border-base-300 bg-base-300 w-80">
        <!-- Informaci贸n de usuario si est谩 autenticado -->
        @if (isAuthenticated() && currentUser()) {
        <div class="flex items-center gap-3 p-3 bg-base-300 rounded-lg">
          <label tabindex="0" class="btn btn-ghost btn-circle avatar">
            <div
              class="w-10 rounded-full bg-primary text-primary-content flex items-center justify-center"
            >
              <span>{{ currentUser()?.email?.charAt(0)?.toUpperCase() }}</span>
            </div>
          </label>
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium truncate">
              {{ currentUser()?.email }}
            </p>
          </div>
        </div>

        <!-- Bot贸n de logout -->
        <button (click)="logout()" class="btn btn-error btn-sm w-full">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
            />
          </svg>
          Cerrar Sesi贸n
        </button>
        }
        <app-theme-switcher></app-theme-switcher>
      </div>
    </div>
  </div>
</header>
